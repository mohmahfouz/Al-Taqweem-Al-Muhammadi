<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مواقيت الصلاة</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/suncalc/1.9.0/suncalc.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans Arabic', sans-serif;
            background-image: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" opacity="0.1"%3E%3Cpath d="M100 10 L120 40 L160 40 L130 60 L140 100 L100 80 L60 100 L70 60 L40 40 L80 40 Z" fill="%23D4AF37"/%3E%3C/svg%3E');
            background-color: #E6F3F3;
            background-size: 100px;
        }
        .time-card {
            transition: transform 0.3s ease, background-color 0.3s ease;
        }
        .time-card:hover {
            transform: translateY(-4px);
            background-color: #F0FDFA;
        }
        #current-time {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        select:focus {
            box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.3);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center">
    <div class="container mx-auto px-4 py-8">
        <div class="bg-white rounded-2xl shadow-xl max-w-lg w-full p-6 text-center">
            <h1 class="text-3xl font-bold text-teal-900 mb-4">مواقيت الصلاة</h1>
            <select id="city-select" aria-label="اختر المدينة" class="w-full p-3 mb-6 bg-teal-50 border border-teal-200 rounded-lg text-teal-900 focus:outline-none focus:ring-2 focus:ring-teal-500 transition duration-200">
                <option value="port_said">بورسعيد، مصر</option>
                <option value="cairo">القاهرة، مصر</option>
                <option value="al_hilla" selected>الحلة، العراق</option>
                <option value="karbala">كربلاء، العراق</option>
                <option value="najaf">النجف، العراق</option>
            </select>
            <p class="text-lg text-teal-700 mb-4">التاريخ والوقت الحالي (GMT+3)</p>
            <div id="current-time" class="text-2xl font-semibold text-teal-600 mb-6">--</div>
            <div id="solar-times" class="space-y-6">
                <div class="time-card bg-teal-50 p-4 rounded-lg shadow-sm">
                    <h2 class="text-xl font-semibold text-teal-900">الفجر الصادق (بدء الشفق الملاحي)</h2>
                    <p id="nautical-twilight-start" class="text-lg text-teal-700">--</p>
                    <h3 class="text-base font-medium text-teal-800 mt-2">شروق الشمس</h3>
                    <p id="sunrise" class="text-lg text-teal-700">--</p>
                </div>
                <div class="time-card bg-teal-50 p-4 rounded-lg shadow-sm">
                    <h2 class="text-xl font-semibold text-teal-900">صلاة الظهرين (الظهر الشمسي)</h2>
                    <p id="solar-noon" class="text-lg text-teal-700">--</p>
                </div>
                <div class="time-card bg-teal-50 p-4 rounded-lg shadow-sm">
                    <h2 class="text-xl font-semibold text-teal-900">غروب الشمس</h2>
                    <p id="sunset" class="text-lg text-teal-700">--</p>
                    <h2 class="text-xl font-semibold text-teal-900 mt-4">صلاة العشاءين عند غياب الحمرة المشرقية (نهاية الشفق المدني)</h2>
                    <p id="civil-twilight-end" class="text-lg text-teal-700">--</p>
                </div>
                <div class="time-card bg-teal-50 p-4 rounded-lg shadow-sm">
                    <h2 class="text-xl font-semibold text-teal-900">صلاة الليل (منتصف الليل)</h2>
                    <p id="night-prayer" class="text-lg text-teal-700">--</p>
                </div>
            </div>
            <p id="coordinates" class="text-sm text-teal-600 mt-6">الإحداثيات: --</p>
            <footer class="text-sm text-teal-600 mt-6">2025 © اسم المصمم: محمد محفوظ</footer>
        </div>
    </div>

    <script>
        // City coordinates
        const cities = {
            port_said: { lat: 31.2565, lng: 32.2841, name: 'بورسعيد، مصر' },
            cairo: { lat: 30.0444, lng: 31.2357, name: 'القاهرة، مصر' },
            al_hilla: { lat: 32.4637, lng: 44.4198, name: 'الحلة، العراق' },
            karbala: { lat: 32.6060, lng: 44.0249, name: 'كربلاء، العراق' },
            najaf: { lat: 32.0259, lng: 44.3462, name: 'النجف، العراق' }
        };

        // Function to format time to HH:MM:SS
        function formatTime(date) {
            return date.toLocaleTimeString('ar-EG', { 
                hour12: false, 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit' 
            });
        }

        // Function to format date and time
        function formatDateTime(date) {
            return date.toLocaleString('ar-EG', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric', 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit', 
                hour12: false 
            });
        }

        // Update current time every second
        function updateCurrentTime() {
            const now = new Date();
            // Adjust for GMT+3
            const gmt3Offset = 3 * 60 * 60 * 1000;
            const localTime = new Date(now.getTime() + gmt3Offset);
            document.getElementById('current-time').textContent = formatDateTime(localTime);
        }

        // Update solar times and coordinates for selected city
        function updateSolarTimes() {
            const selectedCity = document.getElementById('city-select').value;
            const city = cities[selectedCity];
            const solarTimesDiv = document.getElementById('solar-times');
            solarTimesDiv.classList.add('opacity-50');
            setTimeout(() => {
                const today = new Date();
                const timesToday = SunCalc.getTimes(today, city.lat, city.lng);

                const sunset = timesToday.sunset;
                const nauticalDawn = timesToday.nauticalDawn;
                const difference = sunset.getTime() - nauticalDawn.getTime();
                const half = difference / 2;
                const nightPrayer = new Date(sunset.getTime() + half);

                document.getElementById('nautical-twilight-start').textContent = formatTime(timesToday.nauticalDawn);
                document.getElementById('sunrise').textContent = formatTime(timesToday.sunrise);
                document.getElementById('solar-noon').textContent = formatTime(timesToday.solarNoon);
                document.getElementById('sunset').textContent = formatTime(timesToday.sunset);
                document.getElementById('civil-twilight-end').textContent = formatTime(timesToday.dusk);
                document.getElementById('night-prayer').textContent = formatTime(nightPrayer);
                document.getElementById('coordinates').textContent = `الإحداثيات: ${city.lat.toFixed(4)}° شمالاً، ${city.lng.toFixed(4)}° شرقاً`;
                solarTimesDiv.classList.remove('opacity-50');
            }, 300);
        }

        // Initial update
        updateCurrentTime();
        updateSolarTimes();

        // Update current time every second
        setInterval(updateCurrentTime, 1000);

        // Update solar times when city changes
        document.getElementById('city-select').addEventListener('change', updateSolarTimes);

        // Update solar times daily
        setInterval(updateSolarTimes, 24 * 60 * 60 * 1000);
    </script>
</body>
</html>
